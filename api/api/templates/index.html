<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>NBA Shots</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.6.1/d3.min.js" integrity="sha512-MefNfAGJ/pEy89xLOFs3V6pYPs6AmUhXJrRlydI/9wZuGrqxmrdQ80zKHUcyadAcpH67teDZcBeS6oMJLPtTqw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    {% load static %}
</head>

<body>
	<main>
		<div class="container text-center">
            <h1>NBA Shot Data Visualization</h1>
            <div class="row">
                <div class="col-4 border">
                    <h2>League Comparison</h2>
                    <div id="league-comp-bar-chart">
<!--                        <img src="{% static 'leagueComparison.png' %}" alt="League Comparison" style="width: 100%">-->
                    </div>
                </div>
                <div class="col-4 border">
                    <div id="shot-chart2">
                        <label for="start">Start Date:</label>
                        <input class="form-control form-control-sm" type="date" placeholder="Start Date" id="start_date" name="start_date" value="2019-01-01">
                        <label for="end">End Date:</label>
                        <input class="form-control form-control-sm" type="date" placeholder="End Date" id="end_date" name="end_date" value="2022-01-01">
                        <label for="player">Player:</label>
                        <input class="form-control form-control-lg" id="player" type="text" placeholder="Player Name" list="players" value="Trae Young" style="position: relative; margin: 0 auto; display: block">
                        <datalist id="players"></datalist>
                        <label>Minimum</label>
                        <div class="input-group mb-3">
                            <input type="number" class="form-control form-control-sm" placeholder="PPG" aria-label="Points-Per-Game">
                            <input type="number" list="age" class="form-control form-control-sm" placeholder="Age" aria-label="Age">
                            <input type="number" class="form-control fomrm-control-sm" placeholder="Salary" aria-label="Salary">
                        </div>
                        <label>Maximum</label>
                        <div class="input-group mb-3">
                            <input type="number" class="form-control form-control-sm" placeholder="PPG" aria-label="Points-Per-Game">
                            <input type="number" class="form-control form-control-sm" placeholder="Age" aria-label="Age">
                            <input type="number" class="form-control fomrm-control-sm" placeholder="Salary" aria-label="Salary">
                        </div>
                        <button type="button" class="btn btn-success w-100 mb-2" onclick=getShots()>Visualize</button>
                    </div>
                </div>
                <div class="col-4 border">
                    <h2>Shot Chart</h2>
                    <div id="shot-chart3">
                        <img src="{% static 'heatmap.png' %}" alt="Heatmap" style="width: 100%">
                    </div>
                </div>
            </div>
            <div class="row">

                <div class="col-6 border">
                    <h2>Shot Distance</h2>
                    <div id="shotDistanceHistogram"></div>
                </div>
                <div class="col-6 border">
                    <h2>Shot Frequency</h2>
                    <div id="shot-chart5">
                        <img src="{% static 'shotFrequency.png' %}" alt="Shot Frequency" style="width: 100%">
                    </div>
                </div>
            </div>
		</div>
	</main>

</body>
<script src="{% static 'visualizations/dataFunctions.js' %}"></script>
<script src="{% static 'visualizations/histogram.js' %}"></script>
<script src="{% static 'visualizations/D3Chart.js' %}"></script>

<!--League Comparison Bar Chart Files-->
<script src="{% static 'visualizations/league-comparison-bar-chart/league_bar_chart.js' %}"></script>
<script src="{% static 'visualizations/league-comparison-bar-chart/data_processing.js' %}"></script>
<script src="{% static 'visualizations/league-comparison-bar-chart/random_numbers.js' %}"></script>

<script>

    // Shot Distance Bar Chart
	let shotDistanceBarChart = new D3Chart("#barChart","/shots/get/?player=Eddie%20Robinson&start_date=1999-01-01&end_date=2002-01-01")
	shotDistanceBarChart.updateChart = function() {
		console.log(this.data)
	}
	shotDistanceBarChart.build()

    // League Comparison Bar Chart
    let allPlayerStats = getRandomIntegerMatrix(0, 100, [5, 200])
    let singlePlayerStats = getRandomIntegerArray(0, 100, 5)
    let leagueCompBarChart = new LeagueCompBarChart(500, 300, '#league-comp-bar-chart')
    leagueCompBarChart.updateChart(allPlayerStats, singlePlayerStats)

</script>
</html>
